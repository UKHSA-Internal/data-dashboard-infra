name: "ZAP Baseline Scan"
 
on:
  push:
    branches:
      - suyash-kumar2-patch-1
      
permissions:
     contents: read
 
jobs:
  test:
    name: OWASP ZAP SCANS
    runs-on: ubuntu-latest
 
    steps:
       - uses: actions/checkout@v2
         with:
          ref: suyash-kumar2-patch-1
       - name: Pulling Docker Image
         run: docker pull owasp/zap2docker-stable
       - name: Check Permissions
         run: |
          echo $(ls -l /usr/bin/docker)
          echo $(ls -l /zap/wrk/zap.yaml)
        
       - name: Launching the app
         run: docker run --rm -d -p 8080:8080 -v $(pwd):/zap/wrk/:rw -t owasp/zap2docker-stable
         # docker run --rm -d -p 8080:8080 owasp/zap2docker-stable
         
     
       - name: OWASP ZAP
         uses: zaproxy/action-baseline@v0.7.0
         with:
           target: "http://localhost:8080"
           fail_action: false
           # 14/6/23 - want to add to this .yml to extract info from the report to push to DefectDojo
