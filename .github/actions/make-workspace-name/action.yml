name: "Make `ENVIRONMENT_NAME` for terraform workspace name for personal dev environments"

description: "Add ENVIRONMENT_NAME env property"

inputs:
  name:
    description: "The user name on the local machine from which development/testing will be done e.g. janedoe."

runs:
  using: "composite"
  steps:
    - run: |
        source uhd.sh
        WORKSPACE_NAME=$(uhd terraform make-workspace-name ${{ inputs.name }})
        echo "ENVIRONMENT_NAME=${WORKSPACE_NAME//[[:space:]]/}" >> $GITHUB_ENV
      shell: bash
